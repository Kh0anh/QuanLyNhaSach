@startuml
skinparam ActivityBackgroundColor #FFF2CC

|Thủ kho|
start
:Đăng nhập hệ thống;
repeat
    :Chọn chức năng kho\n(Nhập kho / Kiểm kê / Điều chỉnh tồn / Lịch sử nhập);
    if (Nhập kho?) then (Có)
        :Tạo phiếu nhập mới;
        :Chọn/Thêm nhà cung cấp;
        repeat
            :Tìm sách hoặc thêm sách mới;
            :Nhập số lượng thực tế & đơn giá;
        |Thủ kho|
        backward:Nhập tiếp đầu sách khác;
        repeat while (Còn hàng cần nhập?) is (Có)
        :Kiểm tra phiếu & lưu;
        |Hệ thống|
        :Ghi lịch sử nhập hàng;
        :Cộng dồn tồn kho;
        :Cập nhật giá vốn (nếu cần);
        :Thông báo thành công;
        |Thủ kho|
    elseif (Kiểm kê?) then (Có)
        :Chọn khu vực/kệ cần kiểm kê;
        repeat
            :Quét/Nhập từng sách;
            :Nhập số lượng đếm thực tế;
            |Hệ thống|
            :So sánh tồn kho sổ sách;
            :Ghi nhận chênh lệch tạm;
            |Thủ kho|
        backward:Tiếp tục kiểm kê;
        repeat while (Còn sách cần kiểm?) is (Có)
        |Hệ thống|
        :Tổng hợp biên bản kiểm kê;
        :Lưu lịch sử kiểm kê;
        |Thủ kho|
    elseif (Điều chỉnh tồn?) then (Có)
        :Chọn sách cần điều chỉnh;
        :Nhập số lượng mới hoặc áp dụng chênh lệch kiểm kê;
        |Hệ thống|
        :Cập nhật số lượng kho;
        :Ghi log điều chỉnh tồn;
        |Thủ kho|
        :Xác nhận hoàn tất;
    else (Xem lịch sử nhập hàng)
        :Chọn khoảng thời gian/NCC/phiếu nhập;
        |Hệ thống|
        :Hiển thị lịch sử nhập hàng;
        |Thủ kho|
    endif
|Thủ kho|
backward:Chọn chức năng khác;
repeat while (Tiếp tục công việc?) is (Có)

stop
@enduml
